<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –≥–æ–Ω–∫–∞</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: Arial, sans-serif;
      height: 100vh;
      overflow: hidden;
      background: radial-gradient(circle at 20% 20%, #0b0b2a, #000010 70%);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–≤—ë–∑–¥—ã */
    .stars {
      position: fixed;
      width: 100%;
      height: 100%;
      background: transparent url("https://raw.githubusercontent.com/VincentGarreau/particles.js/master/demo/media/star.png") repeat;
      animation: moveStars 60s linear infinite;
      z-index: -1;
      opacity: 0.6;
    }

    @keyframes moveStars {
      from { background-position: 0 0; }
      to { background-position: -10000px 5000px; }
    }

    .menu, .game, .win {
      display: none;
      flex-direction: column;
      align-items: center;
      gap: 16px;
      background: rgba(0,0,40,0.6);
      padding: 24px;
      border-radius: 16px;
      box-shadow: 0 0 20px rgba(0,0,0,0.6);
    }

    .menu.active, .game.active, .win.active {
      display: flex;
    }

    input, button {
      padding: 10px 14px;
      border-radius: 10px;
      border: none;
      font-size: 16px;
    }

    button {
      cursor: pointer;
      background: #4c7cff;
      color: white;
      transition: transform .1s ease, background .2s ease;
    }

    button:hover { background: #6a92ff; }
    button:active { transform: scale(0.95); }

    .track {
      width: 320px;
      height: 80px;
      background: #111133;
      border-radius: 40px;
      position: relative;
      overflow: hidden;
    }

    .ship {
      position: absolute;
      top: 50%;
      left: 0;
      transform: translateY(-50%);
      font-size: 32px;
      transition: left .1s linear;
    }

    .finish {
      position: absolute;
      right: 0;
      top: 0;
      width: 6px;
      height: 100%;
      background: gold;
    }

    .progress {
      font-size: 14px;
      opacity: 0.8;
    }
  </style>
</head>
<body>
  <div class="stars"></div>

  <!-- –ú–ï–ù–Æ -->
  <div class="menu active" id="menu">
    <h1>üöÄ –ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –≥–æ–Ω–∫–∞</h1>
    <input id="nickname" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫" />
    <button id="startBtn">–°—Ç–∞—Ä—Ç</button>
  </div>

  <!-- –ò–ì–†–ê -->
  <div class="game" id="game">
    <div class="track">
      <div class="ship" id="ship">üöÄ</div>
      <div class="finish"></div>
    </div>
    <div class="progress" id="progress">0%</div>
    <button id="moveBtn">–õ–µ—Ç–µ—Ç—å</button>
  </div>

  <!-- –≠–ö–†–ê–ù –ü–û–ë–ï–î–´ -->
  <div class="win" id="win">
    <h2 id="winnerText">–ü–æ–±–µ–¥–∞!</h2>
    <button onclick="restart()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
  </div>

  <script>
    const menu = document.getElementById('menu');
    const game = document.getElementById('game');
    const win = document.getElementById('win');

    const ship = document.getElementById('ship');
    const progressText = document.getElementById('progress');
    const winnerText = document.getElementById('winnerText');

    let progress = 0;
    let nickname = '';

    document.getElementById('startBtn').addEventListener('click', () => {
      const nameInput = document.getElementById('nickname').value.trim();

      if (!nameInput) {
        alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫');
        return;
      }

      nickname = nameInput;
      progress = 0;
      updateShip();

      menu.classList.remove('active');
      game.classList.add('active');
    });

    document.getElementById('moveBtn').addEventListener('click', () => {
      if (progress >= 100) return;

      progress += Math.floor(Math.random() * 15) + 5; // —à–∞–≥ 5‚Äì20
      if (progress > 100) progress = 100;

      updateShip();

      if (progress === 100) {
        showWin();
      }
    });

    function updateShip() {
      ship.style.left = progress + '%';
      progressText.textContent = progress + '%';
    }

    function showWin() {
      game.classList.remove('active');
      win.classList.add('active');
      winnerText.textContent = `üèÜ ${nickname}, –≤—ã –≤—ã–∏–≥—Ä–∞–ª–∏!`;
    }

    function restart() {
      win.classList.remove('active');
      menu.classList.add('active');
      document.getElementById('nickname').value = '';
      progress = 0;
      updateShip();
    }

    /* ==== –ü–†–û–°–¢–´–ï –¢–ï–°–¢–´ (—á—Ç–æ–±—ã –∏–≥—Ä–∞ –Ω–µ –ª–æ–º–∞–ª–∞—Å—å) ==== */
    console.assert(typeof updateShip === 'function', 'updateShip –¥–æ–ª–∂–Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å');
    console.assert(typeof showWin === 'function', 'showWin –¥–æ–ª–∂–Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å');
    console.assert(typeof restart === 'function', 'restart –¥–æ–ª–∂–Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å');
  </script>
</body>
</html>
